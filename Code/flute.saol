global {
 table cyc(harm,128,1);
 srate 44100;
}

instr flute (fr) {
 imports exports table cyc;

 ksig env01,env02,env03,env04,env05,env06,env07,env08,env09,env10,env11,env12,env13,env14,env15,env16,env17,env18,env19,env20;

 asig y01,y02,y03,y04,y05,y06,y07,y08,y09,y10,y11,y12,y13,y14,y15,y16,y17,y18,y19,y20;



// **********************
// computed during k-pass

env01 = kline(0,
	0.121154, 0.126821,
	0.107692, 0.185633,
	0.096154, 0.211073,
	0.059615, 0.255557,
	0.019231, 0.278097,
	0.019231, 0.292906,
	0.040385, 0.270017,
	0.009615, 0.254216,
	0.015385, 0.237838,
	0.015385, 0.229367,
	0.026923, 0.232896,
	0.076923, 0.313022,
	0.026923, 0.274067,
	0.017308, 0.217905,
	0.009615, 0.182745,
	0.059615, 0.117718,
	0.175000, 0.107359,
	0.344231, 0.098393,
	1.065385, 0.002078);

env02 = kline(0,
	0.115385, 0.109963,
	0.215385, 0.240874,
	0.086538, 0.328835,
	0.044231, 0.314505,
	0.011538, 0.294773,
	0.013462, 0.278730,
	0.015385, 0.267327,
	0.019231, 0.264604,
	0.076923, 0.378284,
	0.011538, 0.377367,
	0.019231, 0.349473,
	0.025000, 0.255729,
	0.009615, 0.230729,
	0.017308, 0.202978,
	0.013462, 0.186313,
	0.036538, 0.232262,
	0.738462, 0.241885,
	0.544231, 0.194498,
	0.292308, 0.003575);

env03 = kline(0,
	0.082692, 0.063851,
	0.175000, 0.111520,
	0.065385, 0.107080,
	0.082692, 0.149256,
	0.055769, 0.129666,
	0.026923, 0.110505,
	0.075000, 0.135601,
	0.061538, 0.141322,
	0.017308, 0.116464,
	0.026923, 0.105707,
	0.019231, 0.094559,
	0.023077, 0.093558,
	0.059615, 0.167633,
	0.063462, 0.092797,
	0.019231, 0.078699,
	0.057692, 0.120449,
	0.378846, 0.129190,
	0.871154, 0.082799,
	0.144231, 0.001784);

env04 = kline(0,
	0.121154, 0.104440,
	0.111538, 0.160297,
	0.103846, 0.178152,
	0.063462, 0.239313,
	0.057692, 0.243839,
	0.013462, 0.206753,
	0.046154, 0.195542,
	0.084615, 0.262112,
	0.015385, 0.275729,
	0.034615, 0.188439,
	0.040385, 0.153378,
	0.094231, 0.278066,
	0.050000, 0.162670,
	0.023077, 0.134330,
	0.040385, 0.175186,
	0.021154, 0.218142,
	0.369231, 0.219114,
	0.855769, 0.140624,
	0.159615, 0.002817);

env05 = kline(0,
	0.250000, 0.050610,
	0.236538, 0.052573,
	0.111538, 0.091340,
	0.032692, 0.083642,
	0.021154, 0.038792,
	0.036538, 0.043367,
	0.075000, 0.080240,
	0.046154, 0.056172,
	0.032692, 0.039438,
	0.113462, 0.089941,
	0.076923, 0.031062,
	0.032692, 0.040738,
	0.051923, 0.065417,
	0.073077, 0.038719,
	0.100000, 0.065333,
	0.121154, 0.036677,
	0.440385, 0.054232,
	0.311538, 0.049932,
	0.142308, 0.000843);

env06 = kline(0,
	0.111538, 0.017359,
	0.255769, 0.042226,
	0.196154, 0.031286,
	0.032692, 0.050869,
	0.088462, 0.027569,
	0.105769, 0.060205,
	0.040385, 0.027966,
	0.048077, 0.028143,
	0.048077, 0.046221,
	0.109615, 0.024257,
	0.100000, 0.050589,
	0.082692, 0.025498,
	0.075000, 0.046186,
	0.036538, 0.027736,
	0.269231, 0.022008,
	0.050000, 0.041721,
	0.094231, 0.019350,
	0.450000, 0.029740,
	0.111538, 0.000499);

env07 = kline(0,
	0.405769, 0.025024,
	0.380769, 0.013352,
	0.003846, 0.029156,
	0.003846, 0.013638,
	0.015385, 0.014984,
	0.098077, 0.012338,
	0.036538, 0.024177,
	0.176923, 0.022102,
	0.073077, 0.008078,
	0.230769, 0.009086,
	0.078846, 0.017682,
	0.073077, 0.007015,
	0.050000, 0.016699,
	0.178846, 0.008888,
	0.017308, 0.017341,
	0.138462, 0.008060,
	0.188462, 0.015178,
	0.036538, 0.006738,
	0.119231, 0.000241);

env08 = kline(0,
	0.801923, 0.020638,
	0.975000, 0.011216,
	0.271154, 0.005008,
	0.009615, 0.010307,
	0.026923, 0.005870,
	0.013462, 0.005342,
	0.001923, 0.008010,
	0.017308, 0.007936,
	0.005769, 0.004772,
	0.009615, 0.009320,
	0.003846, 0.005457,
	0.009615, 0.006781,
	0.003846, 0.004190,
	0.009615, 0.011191,
	0.005769, 0.005481,
	0.001923, 0.009691,
	0.003846, 0.005682,
	0.003846, 0.007783,
	0.130769, 0.000094);

env09 = kline(0,
	0.801923, 0.018672,
	1.005769, 0.009949,
	0.201923, 0.008613,
	0.128846, 0.004551,
	0.009615, 0.008652,
	0.007692, 0.007908,
	0.003846, 0.007181,
	0.001923, 0.001933,
	0.003846, 0.003839,
	0.003846, 0.006452,
	0.005769, 0.003321,
	0.011538, 0.004510,
	0.003846, 0.008486,
	0.007692, 0.004728,
	0.003846, 0.006950,
	0.005769, 0.004227,
	0.005769, 0.006954,
	0.009615, 0.002542,
	0.082692, 0.000125);

env10 = kline(0,
	0.801923, 0.013061,
	1.150000, 0.006786,
	0.023077, 0.003822,
	0.023077, 0.003972,
	0.111538, 0.004655,
	0.028846, 0.003727,
	0.001923, 0.002607,
	0.007692, 0.003879,
	0.046154, 0.000264,
	0.001923, 0.002324,
	0.001923, 0.002877,
	0.001923, 0.002254,
	0.001923, 0.002207,
	0.001923, 0.003435,
	0.001923, 0.003418,
	0.001923, 0.002344,
	0.015385, 0.001891,
	0.082692, 0.000106,
	0.000000, 0.000106);

env11 = kline(0,
	0.600000, 0.010092,
	0.705769, 0.008370,
	0.136538, 0.003648,
	0.044231, 0.007075,
	0.065385, 0.002992,
	0.078846, 0.006157,
	0.036538, 0.003177,
	0.007692, 0.006989,
	0.057692, 0.003068,
	0.061538, 0.002908,
	0.176923, 0.003112,
	0.042308, 0.005622,
	0.117308, 0.002243,
	0.003846, 0.005415,
	0.003846, 0.002770,
	0.017308, 0.005210,
	0.015385, 0.002411,
	0.017308, 0.004414,
	0.117308, 0.000091);

env12 = kline(0,
	0.800000, 0.007518,
	1.009615, 0.003943,
	0.203846, 0.002497,
	0.011538, 0.004112,
	0.026923, 0.001800,
	0.038462, 0.003358,
	0.032692, 0.001573,
	0.003846, 0.003125,
	0.059615, 0.001702,
	0.005769, 0.003526,
	0.088462, 0.000142,
	0.007692, 0.000091,
	0.005769, 0.000030,
	0.001923, 0.000044,
	0.001923, 0.000051,
	0.001923, 0.000077,
	0.003846, 0.000068,
	0.001923, 0.000038,
	0.000000, 0.000038);

env13 = kline(0,
	0.596154, 0.005469,
	1.151923, 0.002501,
	0.228846, 0.001642,
	0.013462, 0.002939,
	0.098077, 0.001027,
	0.028846, 0.001479,
	0.013462, 0.002449,
	0.015385, 0.000816,
	0.005769, 0.002399,
	0.001923, 0.001424,
	0.013462, 0.001086,
	0.007692, 0.001845,
	0.005769, 0.000592,
	0.005769, 0.000634,
	0.011538, 0.000838,
	0.005769, 0.001480,
	0.038462, 0.000428,
	0.042308, 0.000147,
	0.021154, 0.000075);

env14 = kline(0,
	0.625000, 0.003927,
	1.009615, 0.003068,
	0.380769, 0.002379,
	0.036538, 0.001028,
	0.030769, 0.002257,
	0.051923, 0.000917,
	0.001923, 0.001498,
	0.001923, 0.001021,
	0.009615, 0.001988,
	0.001923, 0.000869,
	0.003846, 0.001233,
	0.005769, 0.002169,
	0.001923, 0.001128,
	0.003846, 0.002026,
	0.003846, 0.001271,
	0.005769, 0.001879,
	0.003846, 0.000833,
	0.003846, 0.001859,
	0.123077, 0.000012);

env15 = kline(0,
	0.801923, 0.004476,
	0.840385, 0.003504,
	0.217308, 0.001374,
	0.119231, 0.001838,
	0.046154, 0.002878,
	0.155769, 0.000431,
	0.007692, 0.001010,
	0.007692, 0.001186,
	0.005769, 0.002135,
	0.005769, 0.001198,
	0.034615, 0.000303,
	0.017308, 0.000206,
	0.007692, 0.000177,
	0.011538, 0.000093,
	0.005769, 0.000089,
	0.007692, 0.000066,
	0.003846, 0.000081,
	0.009615, 0.000068,
	0.000000, 0.000068);

env16 = kline(0,
	0.425000, 0.002606,
	0.719231, 0.002413,
	0.815385, 0.001641,
	0.184615, 0.000917,
	0.001923, 0.000806,
	0.021154, 0.001132,
	0.011538, 0.000628,
	0.001923, 0.000954,
	0.001923, 0.000633,
	0.001923, 0.000542,
	0.001923, 0.000672,
	0.001923, 0.001025,
	0.001923, 0.000648,
	0.001923, 0.000571,
	0.001923, 0.000557,
	0.003846, 0.000760,
	0.001923, 0.000946,
	0.001923, 0.000797,
	0.103846, 0.000032);

env17 = kline(0,
	0.450000, 0.001659,
	0.844231, 0.001422,
	0.394231, 0.001229,
	0.300000, 0.001076,
	0.182692, 0.001114,
	0.021154, 0.000516,
	0.009615, 0.000827,
	0.073077, 0.000020,
	0.001923, 0.000035,
	0.001923, 0.000069,
	0.003846, 0.000023,
	0.001923, 0.000066,
	0.001923, 0.000042,
	0.003846, 0.000063,
	0.005769, 0.000071,
	0.003846, 0.000039,
	0.001923, 0.000110,
	0.003846, 0.000043,
	0.000000, 0.000043);

env18 = kline(0,
	0.603846, 0.003264,
	0.705769, 0.002747,
	0.684615, 0.001681,
	0.155769, 0.000916,
	0.001923, 0.001134,
	0.042308, 0.000784,
	0.005769, 0.001465,
	0.017308, 0.000464,
	0.036538, 0.000110,
	0.009615, 0.000074,
	0.003846, 0.000114,
	0.009615, 0.000077,
	0.005769, 0.000053,
	0.005769, 0.000063,
	0.009615, 0.000016,
	0.003846, 0.000007,
	0.001923, 0.000035,
	0.001923, 0.000012,
	0.000000, 0.000012);

env19 = kline(0,
	0.959615, 0.002520,
	0.682692, 0.001933,
	0.340385, 0.001026,
	0.003846, 0.001223,
	0.153846, 0.001286,
	0.017308, 0.000818,
	0.001923, 0.001332,
	0.001923, 0.000696,
	0.013462, 0.000625,
	0.001923, 0.000977,
	0.003846, 0.000558,
	0.007692, 0.000900,
	0.003846, 0.000547,
	0.080769, 0.000105,
	0.017308, 0.000022,
	0.005769, 0.000014,
	0.001923, 0.000041,
	0.003846, 0.000039,
	0.003846, 0.000014);

env20 = kline(0,
	0.417308, 0.001685,
	0.888462, 0.001340,
	0.684615, 0.001003,
	0.150000, 0.000779,
	0.046154, 0.000417,
	0.001923, 0.000560,
	0.003846, 0.000636,
	0.001923, 0.000485,
	0.007692, 0.000865,
	0.071154, 0.000015,
	0.001923, 0.000045,
	0.001923, 0.000060,
	0.003846, 0.000036,
	0.003846, 0.000042,
	0.001923, 0.000086,
	0.001923, 0.000091,
	0.009615, 0.000015,
	0.007692, 0.000045,
	0.000000, 0.000045);



// **********************
// computed during a-pass

y01 = env01 * oscil(cyc, fr * 1);
y02 = env02 * oscil(cyc, fr * 2);
y03 = env03 * oscil(cyc, fr * 3);
y04 = env04 * oscil(cyc, fr * 4);
y05 = env05 * oscil(cyc, fr * 5);
y06 = env06 * oscil(cyc, fr * 6);
y07 = env07 * oscil(cyc, fr * 7);
y08 = env08 * oscil(cyc, fr * 8);
y09 = env09 * oscil(cyc, fr * 9);
y10 = env10 * oscil(cyc, fr * 10);
y11 = env11 * oscil(cyc, fr * 11);
y12 = env12 * oscil(cyc, fr * 12);
y13 = env13 * oscil(cyc, fr * 13);
y14 = env14 * oscil(cyc, fr * 14);
y15 = env15 * oscil(cyc, fr * 15);
y16 = env16 * oscil(cyc, fr * 16);
y17 = env17 * oscil(cyc, fr * 17);
y18 = env18 * oscil(cyc, fr * 18);
y19 = env19 * oscil(cyc, fr * 19);
y20 = env20 * oscil(cyc, fr * 20);

output(y01+y02+y03+y04+y05+y06+y07+y08+y09+y10+y11+y12+y13+y14+y15+y16+y17+y18+y19+y20);

}