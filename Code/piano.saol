global {
 table cyc(harm,128,1);
 srate 22050.0;
}

instr piano (fr) {
 imports exports table cyc;

 ksig env01,env02,env03,env04,env05,env06,env07,env08,env09,env10,env11,env12,env13,env14,env15,env16,env17,env18,env19,env20,env21,env22,env23,env24,env25,env26,env27,env28,env29,env30;

 asig y01,y02,y03,y04,y05,y06,y07,y08,y09,y10,y11,y12,y13,y14,y15,y16,y17,y18,y19,y20,y21,y22,y23,y24,y25,y26,y27,y28,y29,y30;



// **********************
// computed during k-pass

env01 = kline(0,
	0.001608, 0.336494,
	0.001608, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	0.000000, 0.308058,
	2.488746, 0.004382);

env02 = kline(0,
	0.001608, 0.097396,
	0.001608, 0.081971,
	0.032154, 0.120713,
	0.001608, 0.119958,
	2.080386, 0.006480,
	0.001608, 0.006493,
	0.139871, 0.005691,
	0.001608, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.000000, 0.005686,
	0.231511, 0.004139);

env03 = kline(0,
	0.001608, 0.103600,
	0.001608, 0.106860,
	0.017685, 0.146819,
	0.001608, 0.146513,
	1.585209, 0.010192,
	0.001608, 0.010181,
	0.149518, 0.008447,
	0.001608, 0.008443,
	0.128617, 0.007252,
	0.001608, 0.007252,
	0.112540, 0.006487,
	0.001608, 0.006481,
	0.101286, 0.006046,
	0.001608, 0.006006,
	0.098071, 0.005696,
	0.094855, 0.005605,
	0.094855, 0.005616,
	0.093248, 0.005881,
	0.003215, 0.005852,
	0.000000, 0.005852);

env04 = kline(0,
	0.001608, 0.065044,
	0.001608, 0.066805,
	0.008039, 0.077307,
	0.001608, 0.076582,
	2.258842, 0.000756,
	0.001608, 0.000778,
	0.020900, 0.000791,
	0.001608, 0.000831,
	0.020900, 0.000895,
	0.001608, 0.000933,
	0.024116, 0.000976,
	0.001608, 0.001026,
	0.025723, 0.001167,
	0.001608, 0.001159,
	0.030547, 0.001347,
	0.001608, 0.001354,
	0.038585, 0.001442,
	0.041801, 0.001610,
	0.008039, 0.001607,
	0.000000, 0.001607);

env05 = kline(0,
	0.006431, 0.103992,
	1.493569, 0.004598,
	0.083601, 0.003924,
	0.073955, 0.003417,
	0.061093, 0.003294,
	0.065916, 0.002895,
	0.057878, 0.002674,
	0.053055, 0.002528,
	0.049839, 0.002493,
	0.051447, 0.002435,
	0.049839, 0.002410,
	0.048232, 0.002532,
	0.051447, 0.002686,
	0.054662, 0.002858,
	0.061093, 0.003053,
	0.067524, 0.003243,
	0.073955, 0.003396,
	0.078778, 0.003670,
	0.008039, 0.003554,
	0.000000, 0.003554);

env06 = kline(0,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	0.000000, 0.036495,
	2.491961, 0.000891);

env07 = kline(0,
	0.017685, 0.023717,
	0.001608, 0.021879,
	1.353698, 0.001580,
	0.001608, 0.001612,
	0.077170, 0.001993,
	0.001608, 0.001997,
	0.117363, 0.002346,
	0.001608, 0.002394,
	0.173633, 0.002597,
	0.001608, 0.002561,
	0.384244, 0.001029,
	0.001608, 0.001028,
	0.149518, 0.000514,
	0.001608, 0.000513,
	0.062701, 0.000399,
	0.001608, 0.000382,
	0.048232, 0.000299,
	0.001608, 0.000308,
	0.028939, 0.000309,
	0.064309, 0.000259);

env08 = kline(0,
	2.067524, 0.000990,
	0.036977, 0.000911,
	0.035370, 0.000841,
	0.035370, 0.000669,
	0.027331, 0.000642,
	0.028939, 0.000531,
	0.024116, 0.000447,
	0.017685, 0.000449,
	0.017685, 0.000418,
	0.017685, 0.000377,
	0.014469, 0.000408,
	0.016077, 0.000405,
	0.016077, 0.000418,
	0.012862, 0.000529,
	0.020900, 0.000512,
	0.017685, 0.000623,
	0.022508, 0.000667,
	0.027331, 0.000718,
	0.027331, 0.000804,
	0.000000, 0.000804);

env09 = kline(0,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	0.000000, 0.010677,
	2.491961, 0.000040);

env10 = kline(0,
	2.221865, 0.000027,
	0.014469, 0.000025,
	0.001608, 0.000053,
	0.014469, 0.000045,
	0.008039, 0.000055,
	0.012862, 0.000054,
	0.016077, 0.000051,
	0.006431, 0.000078,
	0.019293, 0.000073,
	0.024116, 0.000048,
	0.022508, 0.000042,
	0.009646, 0.000055,
	0.017685, 0.000045,
	0.006431, 0.000059,
	0.019293, 0.000058,
	0.020900, 0.000048,
	0.016077, 0.000055,
	0.019293, 0.000055,
	0.014469, 0.000075,
	0.000000, 0.000075);

env11 = kline(0,
	2.411576, 0.000019,
	0.001608, 0.000040,
	0.006431, 0.000023,
	0.001608, 0.000038,
	0.001608, 0.000063,
	0.003215, 0.000042,
	0.006431, 0.000059,
	0.008039, 0.000050,
	0.003215, 0.000083,
	0.003215, 0.000052,
	0.006431, 0.000057,
	0.001608, 0.000087,
	0.004823, 0.000053,
	0.006431, 0.000067,
	0.003215, 0.000081,
	0.003215, 0.000041,
	0.003215, 0.000075,
	0.004823, 0.000118,
	0.006431, 0.000068,
	0.000000, 0.000068);

env12 = kline(0,
	2.446945, 0.000058,
	0.003215, 0.000063,
	0.001608, 0.000030,
	0.001608, 0.000026,
	0.003215, 0.000040,
	0.006431, 0.000011,
	0.001608, 0.000035,
	0.001608, 0.000028,
	0.001608, 0.000050,
	0.001608, 0.000020,
	0.001608, 0.000037,
	0.001608, 0.000024,
	0.003215, 0.000037,
	0.001608, 0.000034,
	0.001608, 0.000064,
	0.001608, 0.000058,
	0.001608, 0.000022,
	0.001608, 0.000031,
	0.003215, 0.000054,
	0.000000, 0.000054);

env13 = kline(0,
	2.303859, 0.000037,
	0.004823, 0.000054,
	0.025723, 0.000038,
	0.016077, 0.000028,
	0.004823, 0.000038,
	0.014469, 0.000026,
	0.001608, 0.000054,
	0.004823, 0.000021,
	0.004823, 0.000032,
	0.004823, 0.000047,
	0.001608, 0.000024,
	0.006431, 0.000036,
	0.019293, 0.000030,
	0.001608, 0.000052,
	0.025723, 0.000035,
	0.016077, 0.000029,
	0.016077, 0.000014,
	0.003215, 0.000042,
	0.001608, 0.000022,
	0.000000, 0.000022);

env14 = kline(0,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	0.000000, 0.008455,
	2.491961, 0.000005);

env15 = kline(0,
	2.366560, 0.000017,
	0.001608, 0.000022,
	0.003215, 0.000018,
	0.006431, 0.000039,
	0.009646, 0.000018,
	0.001608, 0.000029,
	0.001608, 0.000015,
	0.001608, 0.000029,
	0.032154, 0.000015,
	0.001608, 0.000035,
	0.024116, 0.000011,
	0.006431, 0.000016,
	0.001608, 0.000037,
	0.004823, 0.000011,
	0.001608, 0.000022,
	0.004823, 0.000033,
	0.003215, 0.000015,
	0.012862, 0.000014,
	0.001608, 0.000026,
	0.000000, 0.000026);

env16 = kline(0,
	0.001608, 0.003429,
	2.477492, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.000000, 0.000043,
	0.012862, 0.000015);

env17 = kline(0,
	0.138264, 0.006136,
	0.001608, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	0.000000, 0.006120,
	2.352090, 0.000023);

env18 = kline(0,
	0.001608, 0.001431,
	0.001608, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	0.000000, 0.001297,
	2.488746, 0.000011);

env19 = kline(0,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	0.000000, 0.001551,
	2.491961, 0.000032);

env20 = kline(0,
	2.382637, 0.000020,
	0.006431, 0.000036,
	0.006431, 0.000007,
	0.001608, 0.000005,
	0.001608, 0.000010,
	0.001608, 0.000011,
	0.001608, 0.000018,
	0.004823, 0.000016,
	0.003215, 0.000007,
	0.001608, 0.000013,
	0.001608, 0.000027,
	0.001608, 0.000028,
	0.003215, 0.000011,
	0.004823, 0.000009,
	0.001608, 0.000019,
	0.001608, 0.000030,
	0.004823, 0.000008,
	0.001608, 0.000011,
	0.004823, 0.000011,
	0.000000, 0.000011);

env21 = kline(0,
	2.062701, 0.000038,
	0.011254, 0.000016,
	0.012862, 0.000017,
	0.038585, 0.000010,
	0.004823, 0.000019,
	0.003215, 0.000041,
	0.020900, 0.000011,
	0.004823, 0.000019,
	0.028939, 0.000019,
	0.053055, 0.000013,
	0.001608, 0.000026,
	0.059486, 0.000010,
	0.011254, 0.000017,
	0.040193, 0.000009,
	0.019293, 0.000009,
	0.008039, 0.000011,
	0.003215, 0.000026,
	0.004823, 0.000014,
	0.008039, 0.000021,
	0.000000, 0.000021);

env22 = kline(0,
	2.356913, 0.000019,
	0.003215, 0.000028,
	0.022508, 0.000016,
	0.001608, 0.000031,
	0.001608, 0.000035,
	0.006431, 0.000017,
	0.025723, 0.000011,
	0.004823, 0.000019,
	0.009646, 0.000006,
	0.003215, 0.000019,
	0.003215, 0.000007,
	0.001608, 0.000021,
	0.001608, 0.000015,
	0.014469, 0.000017,
	0.003215, 0.000033,
	0.001608, 0.000021,
	0.004823, 0.000013,
	0.020900, 0.000009,
	0.003215, 0.000022,
	0.000000, 0.000022);

env23 = kline(0,
	2.327974, 0.000020,
	0.001608, 0.000025,
	0.011254, 0.000025,
	0.004823, 0.000012,
	0.017685, 0.000008,
	0.006431, 0.000011,
	0.008039, 0.000014,
	0.001608, 0.000030,
	0.003215, 0.000015,
	0.003215, 0.000014,
	0.001608, 0.000026,
	0.001608, 0.000032,
	0.003215, 0.000014,
	0.004823, 0.000012,
	0.006431, 0.000016,
	0.003215, 0.000041,
	0.003215, 0.000014,
	0.003215, 0.000010,
	0.003215, 0.000037,
	0.000000, 0.000037);

env24 = kline(0,
	2.321543, 0.000024,
	0.012862, 0.000028,
	0.008039, 0.000043,
	0.016077, 0.000026,
	0.011254, 0.000041,
	0.004823, 0.000019,
	0.004823, 0.000041,
	0.012862, 0.000024,
	0.006431, 0.000039,
	0.019293, 0.000020,
	0.001608, 0.000034,
	0.001608, 0.000025,
	0.012862, 0.000013,
	0.001608, 0.000019,
	0.022508, 0.000015,
	0.011254, 0.000014,
	0.003215, 0.000030,
	0.004823, 0.000010,
	0.011254, 0.000017,
	0.000000, 0.000017);

env25 = kline(0,
	2.392283, 0.000033,
	0.009646, 0.000004,
	0.001608, 0.000013,
	0.001608, 0.000013,
	0.001608, 0.000022,
	0.001608, 0.000022,
	0.003215, 0.000006,
	0.003215, 0.000014,
	0.004823, 0.000009,
	0.003215, 0.000017,
	0.006431, 0.000011,
	0.004823, 0.000023,
	0.003215, 0.000048,
	0.001608, 0.000048,
	0.003215, 0.000033,
	0.003215, 0.000008,
	0.001608, 0.000012,
	0.001608, 0.000019,
	0.003215, 0.000018,
	0.000000, 0.000018);

env26 = kline(0,
	2.348875, 0.000018,
	0.009646, 0.000029,
	0.051447, 0.000016,
	0.003215, 0.000039,
	0.006431, 0.000013,
	0.006431, 0.000004,
	0.009646, 0.000003,
	0.001608, 0.000011,
	0.001608, 0.000014,
	0.001608, 0.000025,
	0.001608, 0.000020,
	0.001608, 0.000018,
	0.001608, 0.000029,
	0.001608, 0.000032,
	0.001608, 0.000024,
	0.001608, 0.000018,
	0.001608, 0.000019,
	0.001608, 0.000018,
	0.003215, 0.000006,
	0.000000, 0.000006);

env27 = kline(0,
	0.014469, 0.001184,
	2.348875, 0.000017,
	0.001608, 0.000025,
	0.003215, 0.000035,
	0.003215, 0.000023,
	0.009646, 0.000017,
	0.024116, 0.000019,
	0.003215, 0.000034,
	0.003215, 0.000012,
	0.027331, 0.000010,
	0.003215, 0.000025,
	0.016077, 0.000010,
	0.003215, 0.000024,
	0.012862, 0.000016,
	0.003215, 0.000031,
	0.003215, 0.000007,
	0.001608, 0.000014,
	0.003215, 0.000016,
	0.001608, 0.000026,
	0.000000, 0.000026);

env28 = kline(0,
	2.382637, 0.000008,
	0.009646, 0.000015,
	0.012862, 0.000015,
	0.001608, 0.000025,
	0.006431, 0.000007,
	0.001608, 0.000017,
	0.001608, 0.000033,
	0.001608, 0.000036,
	0.001608, 0.000035,
	0.003215, 0.000014,
	0.003215, 0.000024,
	0.003215, 0.000015,
	0.003215, 0.000020,
	0.009646, 0.000005,
	0.001608, 0.000015,
	0.006431, 0.000011,
	0.001608, 0.000023,
	0.001608, 0.000026,
	0.003215, 0.000006,
	0.000000, 0.000006);

env29 = kline(0,
	2.323151, 0.000043,
	0.133441, 0.000002,
	0.001608, 0.000016,
	0.001608, 0.000020,
	0.001608, 0.000023,
	0.001608, 0.000024,
	0.001608, 0.000019,
	0.001608, 0.000014,
	0.001608, 0.000021,
	0.003215, 0.000019,
	0.003215, 0.000040,
	0.001608, 0.000035,
	0.001608, 0.000020,
	0.003215, 0.000022,
	0.001608, 0.000014,
	0.003215, 0.000013,
	0.001608, 0.000015,
	0.001608, 0.000004,
	0.001608, 0.000007,
	0.000000, 0.000007);

env30 = kline(0,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	0.000000, 0.000262,
	2.491961, 0.000008);



// **********************
// computed during a-pass

y01 = env01 * oscil(cyc, fr * 1);
y02 = env02 * oscil(cyc, fr * 2);
y03 = env03 * oscil(cyc, fr * 3);
y04 = env04 * oscil(cyc, fr * 4);
y05 = env05 * oscil(cyc, fr * 5);
y06 = env06 * oscil(cyc, fr * 6);
y07 = env07 * oscil(cyc, fr * 7);
y08 = env08 * oscil(cyc, fr * 8);
y09 = env09 * oscil(cyc, fr * 9);
y10 = env10 * oscil(cyc, fr * 10);
y11 = env11 * oscil(cyc, fr * 11);
y12 = env12 * oscil(cyc, fr * 12);
y13 = env13 * oscil(cyc, fr * 13);
y14 = env14 * oscil(cyc, fr * 14);
y15 = env15 * oscil(cyc, fr * 15);
y16 = env16 * oscil(cyc, fr * 16);
y17 = env17 * oscil(cyc, fr * 17);
y18 = env18 * oscil(cyc, fr * 18);
y19 = env19 * oscil(cyc, fr * 19);
y20 = env20 * oscil(cyc, fr * 20);
y21 = env21 * oscil(cyc, fr * 21);
y22 = env22 * oscil(cyc, fr * 22);
y23 = env23 * oscil(cyc, fr * 23);
y24 = env24 * oscil(cyc, fr * 24);
y25 = env25 * oscil(cyc, fr * 25);
y26 = env26 * oscil(cyc, fr * 26);
y27 = env27 * oscil(cyc, fr * 27);
y28 = env28 * oscil(cyc, fr * 28);
y29 = env29 * oscil(cyc, fr * 29);
y30 = env30 * oscil(cyc, fr * 30);

output(y01+y02+y03+y04+y05+y06+y07+y08+y09+y10+y11+y12+y13+y14+y15+y16+y17+y18+y19+y20+y21+y22+y23+y24+y25+y26+y27+y28+y29+y30);

}